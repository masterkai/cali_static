const data = [
  {
    "id": 1,
    "time": "7/26/2019",
    "methods": "ATM",
    "value": "$996.59",
    "status": false
  }, {
    "id": 2,
    "time": "7/18/2019",
    "methods": "Volvo",
    "value": "$559.52",
    "status": true
  }, {
    "id": 3,
    "time": "6/5/2019",
    "methods": "Acura",
    "value": "$924.55",
    "status": false
  }, {
    "id": 4,
    "time": "12/29/2019",
    "methods": "Ford",
    "value": "$24.66",
    "status": false
  }, {
    "id": 5,
    "time": "8/9/2019",
    "methods": "Ford",
    "value": "$931.05",
    "status": true
  }, {
    "id": 6,
    "time": "9/2/2019",
    "methods": "GMC",
    "value": "$159.30",
    "status": false
  }, {
    "id": 7,
    "time": "2/16/2020",
    "methods": "超商",
    "value": "$155.41",
    "status": false
  }, {
    "id": 8,
    "time": "5/12/2020",
    "methods": "ATM",
    "value": "$895.69",
    "status": true
  }, {
    "id": 9,
    "time": "9/22/2019",
    "methods": "MINI",
    "value": "$46.48",
    "status": false
  }, {
    "id": 10,
    "time": "9/2/2019",
    "methods": "信用卡",
    "value": "$276.54",
    "status": true
  }, {
    "id": 11,
    "time": "8/3/2019",
    "methods": "Lexus",
    "value": "$605.72",
    "status": true
  }, {
    "id": 12,
    "time": "2/25/2020",
    "methods": "超商",
    "value": "$753.86",
    "status": true
  }, {
    "id": 13,
    "time": "2/14/2020",
    "methods": "Ford",
    "value": "$97.90",
    "status": false
  }, {
    "id": 14,
    "time": "5/21/2020",
    "methods": "Lexus",
    "value": "$485.58",
    "status": false
  }, {
    "id": 15,
    "time": "3/5/2020",
    "methods": "Panoz",
    "value": "$975.21",
    "status": true
  }, {
    "id": 16,
    "time": "7/3/2019",
    "methods": "ATM",
    "value": "$489.33",
    "status": true
  }, {
    "id": 17,
    "time": "7/20/2019",
    "methods": "GMC",
    "value": "$20.42",
    "status": true
  }, {
    "id": 18,
    "time": "1/11/2020",
    "methods": "超商",
    "value": "$898.71",
    "status": false
  }, {
    "id": 19,
    "time": "12/31/2019",
    "methods": "超商",
    "value": "$816.36",
    "status": true
  }, {
    "id": 20,
    "time": "4/2/2020",
    "methods": "Hyundai",
    "value": "$961.78",
    "status": true
  }, {
    "id": 21,
    "time": "3/28/2020",
    "methods": "超商",
    "value": "$824.05",
    "status": false
  }, {
    "id": 22,
    "time": "10/19/2019",
    "methods": "Suzuki",
    "value": "$781.28",
    "status": false
  }, {
    "id": 23,
    "time": "1/9/2020",
    "methods": "Infiniti",
    "value": "$312.18",
    "status": false
  }, {
    "id": 24,
    "time": "1/30/2020",
    "methods": "超商",
    "value": "$124.29",
    "status": true
  }, {
    "id": 25,
    "time": "1/1/2020",
    "methods": "超商",
    "value": "$105.78",
    "status": false
  }, {
    "id": 26,
    "time": "9/1/2019",
    "methods": "Buick",
    "value": "$204.31",
    "status": false
  }, {
    "id": 27,
    "time": "3/24/2020",
    "methods": "Suzuki",
    "value": "$272.03",
    "status": true
  }, {
    "id": 28,
    "time": "9/8/2019",
    "methods": "Kia",
    "value": "$208.74",
    "status": true
  }, {
    "id": 29,
    "time": "6/30/2019",
    "methods": "GMC",
    "value": "$676.68",
    "status": false
  }, {
    "id": 30,
    "time": "4/8/2020",
    "methods": "Geo",
    "value": "$586.80",
    "status": false
  }, {
    "id": 31,
    "time": "7/19/2019",
    "methods": "Mercury",
    "value": "$455.20",
    "status": true
  }, {
    "id": 32,
    "time": "7/23/2019",
    "methods": "超商",
    "value": "$122.30",
    "status": false
  }, {
    "id": 33,
    "time": "1/13/2020",
    "methods": "Toyota",
    "value": "$884.85",
    "status": true
  }, {
    "id": 34,
    "time": "11/8/2019",
    "methods": "Isuzu",
    "value": "$759.90",
    "status": true
  }, {
    "id": 35,
    "time": "10/15/2019",
    "methods": "Honda",
    "value": "$591.04",
    "status": false
  }, {
    "id": 36,
    "time": "7/17/2019",
    "methods": "Pontiac",
    "value": "$288.22",
    "status": false
  }, {
    "id": 37,
    "time": "5/7/2020",
    "methods": "GMC",
    "value": "$951.26",
    "status": true
  }, {
    "id": 38,
    "time": "7/14/2019",
    "methods": "信用卡",
    "value": "$133.15",
    "status": false
  }, {
    "id": 39,
    "time": "5/6/2020",
    "methods": "ATM",
    "value": "$110.14",
    "status": false
  }, {
    "id": 40,
    "time": "12/19/2019",
    "methods": "信用卡",
    "value": "$161.30",
    "status": false
  }, {
    "id": 41,
    "time": "11/23/2019",
    "methods": "Mercury",
    "value": "$675.51",
    "status": true
  }, {
    "id": 42,
    "time": "8/30/2019",
    "methods": "ATM",
    "value": "$314.08",
    "status": true
  }, {
    "id": 43,
    "time": "6/18/2019",
    "methods": "Buick",
    "value": "$311.90",
    "status": false
  }, {
    "id": 44,
    "time": "11/30/2019",
    "methods": "Buick",
    "value": "$273.67",
    "status": false
  }, {
    "id": 45,
    "time": "2/15/2020",
    "methods": "GMC",
    "value": "$967.67",
    "status": true
  }, {
    "id": 46,
    "time": "8/24/2019",
    "methods": "Jeep",
    "value": "$820.10",
    "status": true
  }, {
    "id": 47,
    "time": "1/27/2020",
    "methods": "Audi",
    "value": "$95.24",
    "status": true
  }, {
    "id": 48,
    "time": "11/16/2019",
    "methods": "Ford",
    "value": "$826.98",
    "status": false
  }, {
    "id": 49,
    "time": "5/22/2020",
    "methods": "Volvo",
    "value": "$233.22",
    "status": true
  }, {
    "id": 50,
    "time": "8/1/2019",
    "methods": "Infiniti",
    "value": "$209.82",
    "status": true
  }, {
    "id": 51,
    "time": "2/29/2020",
    "methods": "Cadillac",
    "value": "$707.57",
    "status": false
  }, {
    "id": 52,
    "time": "6/4/2019",
    "methods": "ATM",
    "value": "$477.35",
    "status": false
  }, {
    "id": 53,
    "time": "1/29/2020",
    "methods": "Porsche",
    "value": "$425.64",
    "status": true
  }, {
    "id": 54,
    "time": "9/28/2019",
    "methods": "Dodge",
    "value": "$93.25",
    "status": false
  }, {
    "id": 55,
    "time": "11/15/2019",
    "methods": "Isuzu",
    "value": "$743.92",
    "status": true
  }, {
    "id": 56,
    "time": "7/24/2019",
    "methods": "Buick",
    "value": "$591.29",
    "status": false
  }, {
    "id": 57,
    "time": "7/23/2019",
    "methods": "Acura",
    "value": "$22.34",
    "status": true
  }, {
    "id": 58,
    "time": "7/3/2019",
    "methods": "Pontiac",
    "value": "$346.97",
    "status": true
  }, {
    "id": 59,
    "time": "11/5/2019",
    "methods": "信用卡",
    "value": "$715.37",
    "status": true
  }, {
    "id": 60,
    "time": "7/5/2019",
    "methods": "Pontiac",
    "value": "$622.85",
    "status": true
  }, {
    "id": 61,
    "time": "12/27/2019",
    "methods": "Porsche",
    "value": "$751.45",
    "status": false
  }, {
    "id": 62,
    "time": "6/20/2019",
    "methods": "Honda",
    "value": "$754.89",
    "status": false
  }, {
    "id": 63,
    "time": "5/28/2019",
    "methods": "Infiniti",
    "value": "$112.13",
    "status": true
  }, {
    "id": 64,
    "time": "7/31/2019",
    "methods": "Toyota",
    "value": "$879.14",
    "status": false
  }, {
    "id": 65,
    "time": "5/5/2020",
    "methods": "Infiniti",
    "value": "$200.23",
    "status": true
  }, {
    "id": 66,
    "time": "11/9/2019",
    "methods": "Ford",
    "value": "$153.78",
    "status": false
  }, {
    "id": 67,
    "time": "7/13/2019",
    "methods": "Dodge",
    "value": "$945.82",
    "status": true
  }, {
    "id": 68,
    "time": "8/28/2019",
    "methods": "超商",
    "value": "$825.37",
    "status": true
  }, {
    "id": 69,
    "time": "6/21/2019",
    "methods": "超商",
    "value": "$839.81",
    "status": false
  }, {
    "id": 70,
    "time": "1/1/2020",
    "methods": "超商",
    "value": "$946.32",
    "status": true
  }, {
    "id": 71,
    "time": "3/12/2020",
    "methods": "超商",
    "value": "$514.21",
    "status": true
  }, {
    "id": 72,
    "time": "11/2/2019",
    "methods": "Kia",
    "value": "$595.01",
    "status": false
  }, {
    "id": 73,
    "time": "10/4/2019",
    "methods": "ATM",
    "value": "$128.81",
    "status": false
  }, {
    "id": 74,
    "time": "9/10/2019",
    "methods": "Audi",
    "value": "$383.40",
    "status": true
  }, {
    "id": 75,
    "time": "2/9/2020",
    "methods": "MINI",
    "value": "$79.35",
    "status": false
  }, {
    "id": 76,
    "time": "2/11/2020",
    "methods": "ATM",
    "value": "$901.74",
    "status": true
  }, {
    "id": 77,
    "time": "9/9/2019",
    "methods": "信用卡",
    "value": "$742.12",
    "status": true
  }, {
    "id": 78,
    "time": "8/14/2019",
    "methods": "Suzuki",
    "value": "$21.91",
    "status": false
  }, {
    "id": 79,
    "time": "5/7/2020",
    "methods": "Honda",
    "value": "$549.65",
    "status": false
  }, {
    "id": 80,
    "time": "11/17/2019",
    "methods": "Rambler",
    "value": "$230.18",
    "status": true
  }, {
    "id": 81,
    "time": "3/28/2020",
    "methods": "ATM",
    "value": "$6.74",
    "status": false
  }, {
    "id": 82,
    "time": "12/16/2019",
    "methods": "BMW",
    "value": "$929.47",
    "status": false
  }, {
    "id": 83,
    "time": "5/15/2020",
    "methods": "BMW",
    "value": "$724.08",
    "status": false
  }, {
    "id": 84,
    "time": "11/17/2019",
    "methods": "Ford",
    "value": "$893.40",
    "status": true
  }, {
    "id": 85,
    "time": "4/14/2020",
    "methods": "BMW",
    "value": "$713.47",
    "status": true
  }, {
    "id": 86,
    "time": "3/25/2020",
    "methods": "ATM",
    "value": "$882.71",
    "status": false
  }, {
    "id": 87,
    "time": "12/7/2019",
    "methods": "Mercury",
    "value": "$705.04",
    "status": true
  }, {
    "id": 88,
    "time": "10/11/2019",
    "methods": "Lexus",
    "value": "$278.20",
    "status": false
  }, {
    "id": 89,
    "time": "8/31/2019",
    "methods": "ATM",
    "value": "$654.41",
    "status": false
  }, {
    "id": 90,
    "time": "1/21/2020",
    "methods": "Honda",
    "value": "$257.87",
    "status": false
  }, {
    "id": 91,
    "time": "10/19/2019",
    "methods": "Porsche",
    "value": "$270.46",
    "status": true
  }, {
    "id": 92,
    "time": "10/29/2019",
    "methods": "Ford",
    "value": "$844.34",
    "status": false
  }, {
    "id": 93,
    "time": "4/21/2020",
    "methods": "Dodge",
    "value": "$982.78",
    "status": true
  }, {
    "id": 94,
    "time": "4/1/2020",
    "methods": "Buick",
    "value": "$758.83",
    "status": false
  }, {
    "id": 95,
    "time": "6/8/2019",
    "methods": "Acura",
    "value": "$566.16",
    "status": true
  }, {
    "id": 96,
    "time": "11/10/2019",
    "methods": "超商",
    "value": "$542.55",
    "status": false
  }, {
    "id": 97,
    "time": "12/19/2019",
    "methods": "Lincoln",
    "value": "$544.02",
    "status": true
  }, {
    "id": 98,
    "time": "6/16/2019",
    "methods": "BMW",
    "value": "$999.39",
    "status": true
  }, {
    "id": 99,
    "time": "4/15/2020",
    "methods": "Lexus",
    "value": "$323.58",
    "status": true
  }, {
    "id": 100,
    "time": "10/8/2019",
    "methods": "Ford",
    "value": "$398.49",
    "status": false
  }];

const output = document.querySelector('.depositOutput');

const depositLists = {
  postPerPage: 5,
  currentPage: 1,
  optionsLength: 0,
  selected: 1,
  result: null
}

const init = function (data = data) {
  console.log('ready');
  depositLists.result = data;
  // console.log(depositLists.result);
  loadPage(1)
  // console.log(depositLists.optionsLength);
  const pageSelector = document.createElement('select')
  for (let i = 0; i < depositLists.optionsLength; i++) {
    let pageValue = document.createElement('option')
    pageValue.value = (i + 1);
    pageValue.textContent = (i + 1)
    pageSelector.appendChild(pageValue)
    pageSelector.addEventListener('change', e => {
      loadPage(e.target.value)
      depositLists.selected = parseInt(e.target.value)
    });
  }
  $('.pagination .cannotBeRemove:last-child').before(pageSelector)
}

const loadPage = function (pg) {
  $('.depositOutput').html('');

  // pagination.innerHTML = '';
  depositLists.currentPage = pg;
  let startPost = (depositLists.currentPage - 1) * depositLists.postPerPage;
  let totalPages = Math.ceil(depositLists.result.length / depositLists.postPerPage);
  let endPost = startPost + depositLists.postPerPage > depositLists.result.length ? depositLists.result.length : startPost + depositLists.postPerPage;
  depositLists.optionsLength = totalPages;

  for (let x = 0; x < totalPages; x++) {
    if (totalPages <= 1) {
      $('.pagination').css('display', 'none')
    }
  }


  for (let x = startPost; x < endPost; x++) {
    const main = depositLists.result[x];
    let div = document.createElement('div');
    div.classList.add('itemContainer', 'itemContainer__records');
    div.style.height = 'auto';
    let div_id = document.createElement('div');
    let div_time = document.createElement('div');
    let div_method = document.createElement('div');
    let div_value = document.createElement('div');
    let div_status = document.createElement('div');
    div_id.textContent = `單號：${main.id}`;
    div_time.textContent = `${main.time}`;
    div_method.textContent = `儲值方式：${main.methods}`;
    div_value.textContent = `金額：${main.value}`;
    div_status.innerHTML = `狀態：${main.status ? `<span class="success">成功</span>` : '<span class="failure">申請中</span>'}`;
    div.appendChild(div_id);
    div.appendChild(div_time);
    div.appendChild(div_method);
    div.appendChild(div_value);
    div.appendChild(div_status);


    output.appendChild(div)

  }


}

window.addEventListener('load', function () {
  init(data);
});
$('.pagination li:last-child').click(function (e) {
  e.preventDefault();

  if (depositLists.selected === depositLists.optionsLength) {
    return false
  } else {
    depositLists.selected += 1;
    loadPage(depositLists.selected)
    $('.pagination select').val(depositLists.selected);
  }
  console.log('next clicked!');
  console.log('current:', depositLists.selected);
})
$('.pagination li:first-child').click(function (e) {
  e.preventDefault();

  if (depositLists.selected === 1) {
    return false
  } else {
    depositLists.selected -= 1;
    loadPage(depositLists.selected)
    $('.pagination select').val(depositLists.selected);
  }
  console.log('prev clicked!');
  console.log('current:', depositLists.selected);
})